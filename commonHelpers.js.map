{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '45237903-940e6dd06b8edc671dac0e6f2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function fetchImages(query, page) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=12`;\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error('Failed to fetch images');\n    }\n    return response.json();\n  });\n}\n","export function createGalleryMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-list\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\" >\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n          <ul class=\"gallery-block\">\n            <li>\n              <p class=\"gallery-text\">Likes</p>\n              <p class=\"gallery-info\">${likes}</p>\n            </li>\n            <li>\n              <p class=\"gallery-text\">Views</p>\n              <p class=\"gallery-info\">${views}</p>\n            </li>\n            <li>\n              <p class=\"gallery-text\">Comments</p>\n              <p class=\"gallery-info\">${comments}</p>\n            </li>\n            <li>\n              <p class=\"gallery-text\">Downloads</p>\n              <p class=\"gallery-info\">${downloads}</p>\n            </li>\n          </ul>\n        </a>\n      </li>`;\n      }\n    )\n    .join('');\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function renderGallery(markup) {\n  document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  createGalleryMarkup,\n  clearGallery,\n  renderGallery,\n} from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.getElementById('loader');\nconst formData = { text: '' };\nconst STORAGE_KEY = 'search-form-state';\n\npopulateForm();\n\nlet query = '';\nlet page = 1;\nlet simpleLightbox;\n\nform.addEventListener('input', handleFormInput);\nform.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nfunction handleFormInput(event) {\n  const { name, value } = event.target;\n  formData[name] = value.trim();\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction populateForm() {\n  try {\n    const savedData = localStorage.getItem(STORAGE_KEY);\n    if (!savedData) return;\n    const parsedData = JSON.parse(savedData);\n\n    for (const [key, value] of Object.entries(parsedData)) {\n      if (form.elements[key]) {\n        form.elements[key].value = value;\n        formData[key] = value;\n      }\n    }\n  } catch (err) {\n    console.error('Error parsing localStorage data:', err);\n  }\n}\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  query = input.value.trim();\n  if (!query) {\n    showError('Please enter a search query');\n    return;\n  }\n\n  clearGallery();\n  page = 1;\n  loadMoreBtn.classList.add('is-hidden');\n  showLoader();\n\n  fetchImages(query, page)\n    .then(data => {\n      hideLoader();\n      if (data.hits.length === 0) {\n        showInfo('No images found for your query');\n        return;\n      }\n\n      const markup = createGalleryMarkup(data.hits);\n      renderGallery(markup);\n      simpleLightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        captionPosition: 'bottom',\n        className: 'simple-lightbox',\n      });\n      if (data.hits.length < 12) {\n        loadMoreBtn.classList.add('is-hidden');\n      } else {\n        loadMoreBtn.classList.remove('is-hidden');\n      }\n      input.value = '';\n    })\n    .catch(() => {\n      hideLoader();\n      showError('Failed to fetch images');\n    });\n}\n\nfunction handleLoadMore() {\n  page += 1;\n  showLoader();\n\n  fetchImages(query, page)\n    .then(data => {\n      hideLoader();\n      const markup = createGalleryMarkup(data.hits);\n      renderGallery(markup);\n      simpleLightbox.refresh();\n      if (data.hits.length < 12) {\n        loadMoreBtn.classList.add('is-hidden');\n      }\n    })\n\n    .catch(() => {\n      hideLoader();\n      showError('Failed to fetch more images');\n    });\n}\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nfunction showInfo(message) {\n  iziToast.info({\n    title: '',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","url","response","createGalleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","renderGallery","markup","form","input","loadMoreBtn","loader","formData","STORAGE_KEY","populateForm","simpleLightbox","handleFormInput","handleFormSubmit","handleLoadMore","event","name","value","savedData","parsedData","key","err","showError","showLoader","data","hideLoader","showInfo","SimpleLightbox","message","iziToast"],"mappings":"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"}